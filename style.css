@import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&family=Sarabun:wght@300;400;500;600&display=swap');

/* =========================================
   1. BASE SETTINGS & VARIABLES
   ========================================= */
:root {
    --card-radius: 1.5rem;
}

body {
    font-family: 'Sarabun', sans-serif;
    /* ป้องกันการดึงหน้าจอเพื่อรีเฟรชในมือถือ (Pull-to-refresh) */
    overscroll-behavior-y: none;
    -webkit-tap-highlight-color: transparent;
}

.font-heading {
    font-family: 'Kanit', sans-serif;
}

/* =========================================
   2. 3D CARD ENGINE (The Core)
   ========================================= */
.perspective-container {
    /* เพิ่ม perspective เป็น 2000px เพื่อให้การหมุนดูแบนราบและสมจริงในจอ Wide Screen */
    perspective: 2000px;
    margin: 0 auto;
}

.card-container {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
    /* Animation นุ่มนวลแบบ Spring Effect */
    transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
    will-change: transform;
}

.card-container.flipped {
    transform: rotateY(180deg);
}

/* =========================================
   3. CARD FACE STYLING
   ========================================= */
.card-face {
    position: absolute;
    inset: 0; /* top:0, left:0, right:0, bottom:0 */
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: var(--card-radius);
    
    /* Default (Light Mode) */
    background: #ffffff;
    border: 1px solid #e2e8f0;
    /* เงาแบบ Soft Shadow */
    box-shadow: 
        0 4px 6px -1px rgba(0, 0, 0, 0.05), 
        0 10px 15px -3px rgba(0, 0, 0, 0.05);
    
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Dark Mode Overrides */
.dark .card-face {
    background: #1e293b; /* slate-800 */
    border-color: #334155; /* slate-700 */
    box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.4); /* เงาลึกขึ้น */
}

/* --- ด้านหน้า (Front) --- */
.card-front {
    z-index: 2;
    background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%);
}
.dark .card-front {
    background: linear-gradient(145deg, #1e293b 0%, #0f172a 100%);
}

/* --- ด้านหลัง (Back) --- */
.card-back {
    z-index: 1;
    transform: rotateY(180deg);
    background: linear-gradient(145deg, #f8fafc 0%, #ffffff 100%);
}
.dark .card-back {
    background: linear-gradient(145deg, #1e293b 0%, #172554 100%); /* อมน้ำเงินเข้ม */
}

/* =========================================
   4. FLUID TYPOGRAPHY (Responsive Text)
   ========================================= */
/* ใช้สูตร clamp() เพื่อให้ตัวหนังสือยืดหดตามจออย่างสมบูรณ์แบบ */

/* คำศัพท์หน้าการ์ด */
#card-front-text { 
    /* มือถือ: 2.5rem | จอคอม: ขยายได้ถึง 5rem */
    font-size: clamp(2.5rem, 6vw + 1rem, 5rem); 
    line-height: 1.1;
    padding: 0 1rem;
}

/* คำศัพท์หลังการ์ด */
#card-vocab-back { 
    font-size: clamp(2rem, 5vw + 1rem, 3.5rem); 
    margin-bottom: 0.5rem;
}

/* ความหมาย */
#card-meaning { 
    font-size: clamp(1.25rem, 3vw, 1.8rem); 
    line-height: 1.6;
    /* บีบความกว้างเนื้อหาให้อ่านง่าย ไม่ยาวเกินไปในจอคอม */
    max-width: 85%;
    margin-left: auto;
    margin-right: auto;
}

/* ตัวอย่างประโยค */
#card-ex-th { font-size: clamp(1rem, 2.5vw, 1.25rem); }
#card-ex-en { font-size: clamp(0.95rem, 2.5vw, 1.15rem); }

/* ปรับกล่องตัวอย่างประโยคในจอ Wide */
.card-back .bg-slate-50, 
.card-back .dark\:bg-slate-800\/80 {
    width: 100%;
    max-width: 90%; /* ไม่ให้ชนขอบการ์ด */
    margin: 0 auto;
}

/* =========================================
   5. CUSTOM SCROLLBAR & UTILS
   ========================================= */
.custom-scroll {
    overflow-y: auto;
    scrollbar-width: thin;
}

.custom-scroll::-webkit-scrollbar {
    width: 8px; /* กว้างขึ้นเล็กน้อยเพื่อให้กดง่ายใน Desktop */
}

.custom-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.custom-scroll::-webkit-scrollbar-thumb {
    background-color: #cbd5e1;
    border-radius: 4px;
    border: 2px solid transparent;
    background-clip: content-box;
}

.dark .custom-scroll::-webkit-scrollbar-thumb {
    background-color: #475569;
}

/* Interaction Logic (สำคัญมาก ห้ามลบ) */
.card-front { pointer-events: auto; }
.card-back { pointer-events: none; }
.card-container.flipped .card-front { pointer-events: none; }
.card-container.flipped .card-back { pointer-events: auto; }

/* =========================================
   6. ANIMATIONS
   ========================================= */
@keyframes fadeUp {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-up { animation: fadeUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
.animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }

/* Microphone Pulse Effect */
.mic-listening {
    animation: pulse-red 1.5s infinite;
    color: #ef4444 !important;
}
@keyframes pulse-red {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
    70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
}